<!DOCTYPE html><!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">

<meta charset="UTF-8">
<title>products</title>
<link href="../static/styles.css" rel="stylesheet">
<script src="//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(function () {
        $(".buy").click(function () {
            let id = this.value;
            $("#buy_id").val(id);
            document.buy.submit();
        });
    });
</script>

<table>
  <thead>
  <tr>
    <th>name
    <th>retail price
    <th>category
    <th>membership discount
    <th>stock info
  <tbody>
  <tr th:each="product: ${products}">
    <td th:text="${product.name}">
    <td th:text="${product.retailPrice}">
    <td th:text="${product.category}">
    <td th:text="${product.membershipDiscount}">
    <td th:text="${product.stockInfo}">
    <td>
      <button class="buy" th:value="${product.productId}">buy</button>
</table>

<form action="#" id="buy" name="buy" th:action="@{/buyProduct}" th:method="post" th:object="product">
  <label><input disabled id="buy_id" type="number"></label>
</form>
